

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>backup – Data or system volume group backup management. &mdash; IBM Power Systems AIX 1.0.0-beta1 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="bootlist – Alters the list of boot devices available to the system." href="bootlist.html" />
    <link rel="prev" title="alt_disk – Alternate rootvg disk management." href="alt_disk.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> IBM Power Systems AIX
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quickstart.html">Quickstart</a></li>
</ul>
<p class="caption"><span class="caption-text">References</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../modules.html">Modules</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../modules.html#module-reference">Module reference</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="_nim_upgradeios.html">_nim_upgradeios – Use NIM to update a single or a pair of Virtual I/O Servers.</a></li>
<li class="toctree-l3"><a class="reference internal" href="aixpert.html">aixpert – System security settings management.</a></li>
<li class="toctree-l3"><a class="reference internal" href="alt_disk.html">alt_disk – Alternate rootvg disk management.</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">backup – Data or system volume group backup management.</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#synopsis">Synopsis</a></li>
<li class="toctree-l4"><a class="reference internal" href="#requirements">Requirements</a></li>
<li class="toctree-l4"><a class="reference internal" href="#parameters">Parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="#notes">Notes</a></li>
<li class="toctree-l4"><a class="reference internal" href="#examples">Examples</a></li>
<li class="toctree-l4"><a class="reference internal" href="#return-values">Return Values</a></li>
<li class="toctree-l4"><a class="reference internal" href="#status">Status</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="bootlist.html">bootlist – Alters the list of boot devices available to the system.</a></li>
<li class="toctree-l3"><a class="reference internal" href="devices.html">devices – Devices management.</a></li>
<li class="toctree-l3"><a class="reference internal" href="emgr.html">emgr – System interim fixes management.</a></li>
<li class="toctree-l3"><a class="reference internal" href="filesystem.html">filesystem – Local and NFS filesystems management.</a></li>
<li class="toctree-l3"><a class="reference internal" href="flrtvc.html">flrtvc – Generate FLRTVC report, download and install security and HIPER fixes.</a></li>
<li class="toctree-l3"><a class="reference internal" href="geninstall.html">geninstall – Generic installer for various packaging formats.</a></li>
<li class="toctree-l3"><a class="reference internal" href="group.html">group – Manage presence, attributes and member of AIX groups.</a></li>
<li class="toctree-l3"><a class="reference internal" href="inittab.html">inittab – Manage inittab entries on AIX.</a></li>
<li class="toctree-l3"><a class="reference internal" href="installp.html">installp – Installs and updates software.</a></li>
<li class="toctree-l3"><a class="reference internal" href="lpar_facts.html">lpar_facts – Reports logical partition (LPAR) related information as facts.</a></li>
<li class="toctree-l3"><a class="reference internal" href="lpp_facts.html">lpp_facts – Returns installed software products as facts.</a></li>
<li class="toctree-l3"><a class="reference internal" href="lvg.html">lvg – Configure AIX LVM volume groups</a></li>
<li class="toctree-l3"><a class="reference internal" href="lvm_facts.html">lvm_facts – Reports LVM information as facts.</a></li>
<li class="toctree-l3"><a class="reference internal" href="lvol.html">lvol – Configure AIX LVM logical volumes</a></li>
<li class="toctree-l3"><a class="reference internal" href="mkfilt.html">mkfilt – Activates or deactivates the filter rules.</a></li>
<li class="toctree-l3"><a class="reference internal" href="mktcpip.html">mktcpip – Sets the required values for starting TCP/IP on a host.</a></li>
<li class="toctree-l3"><a class="reference internal" href="mktun.html">mktun – Creates, activates, deactivates and removes tunnels.</a></li>
<li class="toctree-l3"><a class="reference internal" href="mount.html">mount – Mounts/unmounts a filesystem or device on AIX.</a></li>
<li class="toctree-l3"><a class="reference internal" href="mpio.html">mpio – Returns information about MultiPath I/O capable devices.</a></li>
<li class="toctree-l3"><a class="reference internal" href="nim.html">nim – Performs NIM operations - server setup, install packages, update SP or TL.</a></li>
<li class="toctree-l3"><a class="reference internal" href="nim_backup.html">nim_backup – Uses NIM to manage backup of LPAR or VIOS clients.</a></li>
<li class="toctree-l3"><a class="reference internal" href="nim_flrtvc.html">nim_flrtvc – Use NIM to generate FLRTVC report, download and install security and HIPER fixes.</a></li>
<li class="toctree-l3"><a class="reference internal" href="nim_suma.html">nim_suma – Use NIM to download fixes, SP or TL from IBM Fix Central website.</a></li>
<li class="toctree-l3"><a class="reference internal" href="nim_updateios.html">nim_updateios – Use NIM to update a single or a pair of Virtual I/O Servers.</a></li>
<li class="toctree-l3"><a class="reference internal" href="nim_vios_alt_disk.html">nim_vios_alt_disk – Uses NIM to create/cleanup an alternate rootvg disk of VIOS clients.</a></li>
<li class="toctree-l3"><a class="reference internal" href="nim_vios_hc.html">nim_vios_hc – Check if a pair of VIOSes can be updated.</a></li>
<li class="toctree-l3"><a class="reference internal" href="nim_viosupgrade.html">nim_viosupgrade – Use NIM to upgrade VIOS(es) with the viosupgrade tool from a NIM master.</a></li>
<li class="toctree-l3"><a class="reference internal" href="reboot.html">reboot – Reboot AIX machines.</a></li>
<li class="toctree-l3"><a class="reference internal" href="suma.html">suma – Download/Install fixes, SP or TL from IBM Fix Central website.</a></li>
<li class="toctree-l3"><a class="reference internal" href="user.html">user – Create new users or change/remove attributes of users on AIX.</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../playbooks.html">Playbooks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../roles.html">Roles</a></li>
</ul>
<p class="caption"><span class="caption-text">Community Guides</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../community_guides.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../community_guides.html#helpful-links">Helpful Links</a></li>
</ul>
<p class="caption"><span class="caption-text">Requirements</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../requirements.html">Requirements</a></li>
</ul>
<p class="caption"><span class="caption-text">Appendices</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../release_notes.html">Releases</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">IBM Power Systems AIX</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../modules.html">Modules</a> &raquo;</li>
        
      <li>backup – Data or system volume group backup management.</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            
              <a href="https://github.com/IBM/ansible-power-aix/blob/dev-collection/docs/source/modules/backup.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="backup-data-or-system-volume-group-backup-management">
<span id="backup-module"></span><h1>backup – Data or system volume group backup management.<a class="headerlink" href="#backup-data-or-system-volume-group-backup-management" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#synopsis" id="id1">Synopsis</a></p></li>
<li><p><a class="reference internal" href="#requirements" id="id2">Requirements</a></p></li>
<li><p><a class="reference internal" href="#parameters" id="id3">Parameters</a></p></li>
<li><p><a class="reference internal" href="#notes" id="id4">Notes</a></p></li>
<li><p><a class="reference internal" href="#examples" id="id5">Examples</a></p></li>
<li><p><a class="reference internal" href="#return-values" id="id6">Return Values</a></p></li>
<li><p><a class="reference internal" href="#status" id="id7">Status</a></p></li>
</ul>
</div>
<div class="section" id="synopsis">
<h2><a class="toc-backref" href="#id1">Synopsis</a><a class="headerlink" href="#synopsis" title="Permalink to this headline">¶</a></h2>
<p>This module manages backup image of data or system volume group on a logical partition (LPAR).</p>
<p>It uses mksysb or savevg commands to create backup image of a volume group either in a file or onto a device.</p>
<p>It uses restvg or alt_disk_mksysb to restore a backup image to disk(s).</p>
<p>mksysb and alt_disk_mksysb operate on system volume group creating and restoring installable backup image while savevg and restvg operate on data volume group.</p>
</div>
<div class="section" id="requirements">
<h2><a class="toc-backref" href="#id2">Requirements</a><a class="headerlink" href="#requirements" title="Permalink to this headline">¶</a></h2>
<p>The below requirements are needed on the host that executes this module.</p>
<ul class="simple">
<li><p>AIX &gt;= 7.1 TL3</p></li>
<li><p>Python &gt;= 2.7</p></li>
<li><p>Privileged user with authorization: <strong>aix.system.install</strong></p></li>
</ul>
</div>
<div class="section" id="parameters">
<h2><a class="toc-backref" href="#id3">Parameters</a><a class="headerlink" href="#parameters" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><dl>
<dt>action (True, str, None)</dt><dd><p>Specifies the operation to perform on the LPAR.</p>
<p><code class="docutils literal notranslate"><span class="pre">create</span></code> to create a backup image.</p>
<p><code class="docutils literal notranslate"><span class="pre">restore</span></code> to restore a backup image.</p>
<p><code class="docutils literal notranslate"><span class="pre">view</span></code> to get useful information about a backup image.</p>
</dd>
<dt>type (optional, str, savevg)</dt><dd><p>Specifies the type of backup object to operate.</p>
<p><code class="docutils literal notranslate"><span class="pre">mksysb</span></code> operates on backup of the operating system (that is, the root volume group) of a LPAR target.</p>
<p><code class="docutils literal notranslate"><span class="pre">savevg</span></code> operates on LPAR savevg, that is all files belonging to a volume group.</p>
<p>Discarded for <em>action=view</em> as this action only applies to savevg.</p>
</dd>
<dt>name (optional, str, None)</dt><dd><p>Specifies the targets of the operation.</p>
<p>Discarded if <em>type=mksysb</em>.</p>
<p>Required if <em>action=create</em> and <em>type=savevg</em>, then it specifies the volume group to back up.</p>
<p>If <em>action=restore</em> and <em>type=savevg</em>, it specifies the disk device to restore to and do not use the one in the vgname.data file.</p>
</dd>
<dt>flags (optional, str, None)</dt><dd><p>Specifies additional flag to pass to the command. Refers to IBM documentation for details.</p>
<p>For <em>action=create</em> and <em>type=mksysb</em>, you could use <code class="docutils literal notranslate"><span class="pre">-a</span> <span class="pre">-A</span> <span class="pre">-b</span> <span class="pre">number</span> <span class="pre">-F</span> <span class="pre">filename</span> <span class="pre">-G|-N</span> <span class="pre">-M</span> <span class="pre">-P</span> <span class="pre">-t</span> <span class="pre">path</span> <span class="pre">-T</span> <span class="pre">-V</span> <span class="pre">-Z</span></code>.</p>
<p>For <em>action=restore</em> and <em>type=mksysb</em>, you could use <code class="docutils literal notranslate"><span class="pre">-p</span> <span class="pre">platform</span> <span class="pre">-L</span> <span class="pre">mksysb_level</span> <span class="pre">-c</span> <span class="pre">console</span> <span class="pre">-K</span> <span class="pre">-O</span> <span class="pre">-g</span> <span class="pre">-k</span> <span class="pre">-r</span> <span class="pre">-z</span> <span class="pre">-T</span> <span class="pre">-S</span> <span class="pre">-C</span></code>.</p>
<p>For <em>action=create</em> and <em>type=savevg</em>, you could use <code class="docutils literal notranslate"><span class="pre">-a</span> <span class="pre">-A</span> <span class="pre">-b</span> <span class="pre">Blocks</span> <span class="pre">-p</span> <span class="pre">-T</span> <span class="pre">-V</span> <span class="pre">-Z</span></code>.</p>
<p>For <em>action=restore</em> and <em>type=savevg</em>, you could use <code class="docutils literal notranslate"><span class="pre">-b</span> <span class="pre">Blocks</span> <span class="pre">-n</span> <span class="pre">-P</span> <span class="pre">PPsize</span></code>.</p>
</dd>
<dt>location (optional, path, None)</dt><dd><p>Specifies the location of the backup files. It can be a device or file path.</p>
<p>When <em>type=savevg</em> or <em>action=view</em>, the default device is <code class="docutils literal notranslate"><span class="pre">/dev/rmt0</span></code>.</p>
<p>Required if <em>action=view</em> or <em>type=mksysb</em>.</p>
</dd>
<dt>disk (optional, list, None)</dt><dd><p>Specifies the name or names of the target disk(s) where the alternate rootvg is created.</p>
<p>This disk or these disks must not currently contain any volume group definition.</p>
<p>Required if <em>action=restore</em> and <em>type=mksysb</em>.</p>
</dd>
<dt>script (optional, path, None)</dt><dd><p>Specifies the full path of a customization script file to run at the end of the mksysb installation.</p>
<p>Can be used if <em>action=restore</em> or <em>type=mksysb</em>.</p>
</dd>
<dt>resolv_conf (optional, path, None)</dt><dd><p>Specifies the full path of a alternate resolv.conf file to replace the existing one after the mksysb installation.</p>
<p>Can be used if <em>action=restore</em> or <em>type=mksysb</em>.</p>
</dd>
<dt>phase (optional, str, None)</dt><dd><p>Specifies the phase(s) to execute during the invocation of the alt_disk_mksysb command.</p>
<p>Can be used if <em>action=restore</em> or <em>type=mksysb</em>.</p>
</dd>
<dt>data_file (optional, path, None)</dt><dd><p>Specifies a full path filename to use instead of the one from the image being restored.</p>
<p>If <em>type=mksysb</em> it specifies the image.data file.</p>
<p>If <em>type=savevg</em> it specifies the vgname.data file.</p>
<p>Can be used if <em>action=restore</em>.</p>
</dd>
<dt>create_data_file (optional, str, no)</dt><dd><p>Specifies to create the data file containing information on the vloume group, logical volumes, file systems and their sizes.</p>
<p>If <em>volume_group=rootvg</em>, then data file will be in <code class="docutils literal notranslate"><span class="pre">/image.data</span></code>.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">volume_group</span></code> is a data volume group, data file will be in <code class="docutils literal notranslate"><span class="pre">/tmp/vgdata/vgname/vgname.data</span></code>.</p>
<p>Specify <em>create_data_file=mapfile</em> to create the MAPFILE containing the mapping of the logical to physical partitions for each logical volume in the volume group. This mapping can be used to allocate the same logical-to-physical mapping when the image is restored.</p>
<p>Can be used if <em>action=create</em>.</p>
</dd>
<dt>exclude_fs (optional, path, None)</dt><dd><p>Specifies a file path that contains the list of file systems to exclude from the backup.</p>
<p>One file system mount point is listed per line.</p>
<p>Can be used if <em>action=create</em>.</p>
</dd>
<dt>remain_nim_client (optional, bool, False)</dt><dd><p>Specifies to remains NIM client after the mksysb installation.</p>
<p>The /.rhosts and /etc/niminfo files are copied to the alternate rootvg’s file system.</p>
<p>Can be used if <em>action=restore</em> or <em>type=mksysb</em>.</p>
</dd>
<dt>import_vg (optional, bool, False)</dt><dd><p>Specifies to look for and import volume groupe found in mksysb backup image.</p>
<p>Can be used if <em>action=restore</em> or <em>type=mksysb</em>.</p>
</dd>
<dt>debug (optional, bool, False)</dt><dd><p>Specifies the debug mode (that is the set -x output).</p>
<p>Can be used if <em>action=restore</em> or <em>type=mksysb</em>.</p>
</dd>
<dt>bootlist (optional, bool, True)</dt><dd><p>Specifies to run the bootlist command after the mksysb installation.</p>
<p>Cannot be used if <em>flags</em> contains the <code class="docutils literal notranslate"><span class="pre">-r</span></code> flag.</p>
<p>Can be used if <em>action=restore</em> or <em>type=mksysb</em>.</p>
</dd>
<dt>force (optional, bool, False)</dt><dd><p>Specifies to overwrite existing backup image.</p>
<p>Can be used if <em>action=create</em> and <em>type=savevg</em>.</p>
</dd>
<dt>exclude_data (optional, bool, False)</dt><dd><p>If <em>action=create</em>, specifies to exclude user data from the backup. Backs up user volume group information and administration data files. This backs up files such as /tmp/vgdata/vgname/vgname.data and map files if any exist. Cannot be used on a rootvg.</p>
<p>If <em>action=restore</em>, specifies to recreate the volume group structure only without restoring any files or data.</p>
<p>Can be used if <em>type=savevg</em>.</p>
</dd>
<dt>exclude_packing_files (optional, bool, False)</dt><dd><p>Specifies to exclude files specified in the /etc/exclude_packing.rootvg, /etc/exclude_packing.vgname, or /etc/exclude_packing.WPARname file from being packed.</p>
<p>Can be used if <em>action=create</em> and <em>type=mksysb</em>.</p>
</dd>
<dt>exclude_files (optional, bool, False)</dt><dd><p>Specifies to exclude files specified in the /etc/exclude.vgname file from being backed up.</p>
<p>The /etc/exclude.vgname file should contain patterns of file names that you do not want included in your system backup image. They are input to the pattern matching conventions of the grep command.</p>
<p>Can be used if <em>action=create</em>.</p>
</dd>
<dt>extend_fs (optional, bool, False)</dt><dd><p>Specifies to extend the filesystem if needed.</p>
<p>Can be used if <em>action=create</em>.</p>
</dd>
<dt>minimize_lv_size (optional, bool, False)</dt><dd><p>Specifies to create the logical volumes with minimum size possible to accomodate the file system.</p>
<p>Can be used if <em>action=restore</em> and <em>type=savevg</em>.</p>
</dd>
<dt>verbose (optional, bool, False)</dt><dd><p>Specifies to run the operation in verbose mode.</p>
<p>Can be used if <em>action=create</em> or <em>action=restore</em>.</p>
</dd>
</dl>
</div></blockquote>
</div>
<div class="section" id="notes">
<h2><a class="toc-backref" href="#id4">Notes</a><a class="headerlink" href="#notes" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">restore</span></code> <code class="docutils literal notranslate"><span class="pre">mksysb</span></code> operation can be long, one can use the default log file /var/adm/ras/alt_disk_inst.log to track progress.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">savevg</span></code> only backs up varied-on volume group. The file systems must be mounted.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">savevg</span></code> backs up all logical volume information and will be recreated. However, only JFS-mounted file system data will be backed up. Raw logical volume data will NOT be backed up using a savevg.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">savevg</span></code> only backs up varied-on volume group. The file systems must be mounted.</p></li>
<li><p>This <a class="reference internal" href="#backup-module"><span class="std std-ref">backup</span></a> module only operates on LPAR, for operation on VIOS, please checkout the <span class="xref std std-ref">backupios</span> module in the power-vios collection.</p></li>
<li><p>You can refer to the IBM documentation for additional information on the commands used at U(<a class="reference external" href="https://www.ibm.com/support/knowledgecenter/ssw_aix_72/a_commands/alt_disk_mksysb.html">https://www.ibm.com/support/knowledgecenter/ssw_aix_72/a_commands/alt_disk_mksysb.html</a>, U(<a class="reference external" href="https://www.ibm.com/support/knowledgecenter/ssw_aix_72/l_commands/lsmksysb.html">https://www.ibm.com/support/knowledgecenter/ssw_aix_72/l_commands/lsmksysb.html</a>, U(<a class="reference external" href="https://www.ibm.com/support/knowledgecenter/ssw_aix_72/m_commands/mksysb.html">https://www.ibm.com/support/knowledgecenter/ssw_aix_72/m_commands/mksysb.html</a>, U(<a class="reference external" href="https://www.ibm.com/support/knowledgecenter/ssw_aix_72/r_commands/restvg.html">https://www.ibm.com/support/knowledgecenter/ssw_aix_72/r_commands/restvg.html</a>, U(<a class="reference external" href="https://www.ibm.com/support/knowledgecenter/ssw_aix_72/s_commands/savevg.html">https://www.ibm.com/support/knowledgecenter/ssw_aix_72/s_commands/savevg.html</a>.</p></li>
</ul>
</div>
</div>
<div class="section" id="examples">
<h2><a class="toc-backref" href="#id5">Examples</a><a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h2>
<div class="highlight-yaml+jinja notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">backup the rootvg with mksysb</span>
  <span class="nt">backup</span><span class="p">:</span>
    <span class="nt">action</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">create</span>
    <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">mksysb</span>
    <span class="nt">location</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">/tmp/backup_rootvg</span>
    <span class="nt">exclude_files</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
    <span class="nt">extend_fs</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">yes</span>

<span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">install the mksysb image to /dev/hdisk1 using the 64 bits kernel if possible</span>
  <span class="nt">backup</span><span class="p">:</span>
    <span class="nt">action</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">restore</span>
    <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">mksysb</span>
    <span class="nt">location</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">/ESSAI/backup_datavg</span>
    <span class="nt">disk</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">/dev/hdisk1</span>
    <span class="nt">flags</span><span class="p">:</span> <span class="s">&#39;-K&#39;</span>

<span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">savevg of rootvg to /dev/hdisk1</span>
  <span class="nt">backup</span><span class="p">:</span>
    <span class="nt">action</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">create</span>
    <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">savevg</span>
    <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">rootvg</span>
    <span class="nt">location</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">/dav/rmt1</span>
    <span class="nt">exclude_data</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">no</span>
    <span class="nt">exclude_files</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">no</span>
    <span class="nt">exclude_fs</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">/tmp/exclude_fs_list</span>
    <span class="nt">create_data_file</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">yes</span>
    <span class="nt">extend_fs</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">yes</span>
    <span class="nt">verbose</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">yes</span>

<span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">savevg of datavg structure to /dev/hdisk2</span>
  <span class="nt">backup</span><span class="p">:</span>
    <span class="nt">action</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">create</span>
    <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">savevg</span>
    <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">datavg</span>
    <span class="nt">location</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">/tmp/backup_datavg</span>
    <span class="nt">exclude_data</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">yes</span>
    <span class="nt">exclude_files</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">yes</span>
    <span class="nt">create_data_file</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">yes</span>

<span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">view the vg backup image stored on /dev/hdisk1 with savevg</span>
  <span class="nt">backup</span><span class="p">:</span>
    <span class="nt">action</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">view</span>
    <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">savevg</span>
    <span class="nt">location</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">/dev/hdisk1</span>

<span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">restvg to restore datavg structure only to /dev/hdisk2</span>
  <span class="nt">backup</span><span class="p">:</span>
    <span class="nt">action</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">restore</span>
    <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">savevg</span>
    <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">datavg</span>
    <span class="nt">location</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">/tmp/backup_datavg</span>
    <span class="nt">data_file</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">/tmp/datavg.mydata</span>
    <span class="nt">exclude_data</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">yes</span>
    <span class="nt">minimize_lv_size</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">yes</span>
    <span class="nt">flags</span><span class="p">:</span> <span class="s">&#39;-n&#39;</span>
</pre></div>
</div>
</div>
<div class="section" id="return-values">
<h2><a class="toc-backref" href="#id6">Return Values</a><a class="headerlink" href="#return-values" title="Permalink to this headline">¶</a></h2>
<dl class="simple">
<dt>msg (always, str, AIX create backup operation successfull.)</dt><dd><p>The execution message.</p>
</dd>
<dt>cmd (when the command is run., str, /bin/restvg -f /dev/rmt0 -l)</dt><dd><p>The command executed.</p>
</dd>
<dt>stdout (always, str, hdisk1 lv00 x           11 ./tmp/vgdata/datavg/image.info x          127 ./tmp/vgdata/vgdata.files11928014 x          127 ./tmp/vgdata/vgdata.files x         2320 ./tmp/vgdata/datavg/filesystems x         1530 ./tmp/vgdata/datavg/datavg.data x          278 ./tmp/vgdata/datavg/backup.data total size: 4393)</dt><dd><p>The standard output of the command.</p>
</dd>
</dl>
<p>stderr (always, str, Will create the Volume Group:      datavg Target Disks:      Allocation Policy: Shrink Filesystems:        yes Preserve Physical Partitions for each Logical Volume:       no
New volume on /tmp/datavg_backup: Cluster 51200 bytes (100 blocks). Volume number 1 Date of backup: Thu Aug  6 03:53:53 2020 Files backed up by name User root files restored: 6)</p>
<blockquote>
<div><p>The standard error of the command.</p>
</div></blockquote>
<dl>
<dt>rc (always, int, 0)</dt><dd><p>The return code of the command.</p>
<p>Equal <em>-1</em> when the command has not been run.</p>
</dd>
</dl>
</div>
<div class="section" id="status">
<h2><a class="toc-backref" href="#id7">Status</a><a class="headerlink" href="#status" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>This module is not guaranteed to have a backwards compatible interface. <em>[preview]</em></p></li>
<li><p>This module is maintained by community.</p></li>
</ul>
<div class="section" id="authors">
<h3>Authors<a class="headerlink" href="#authors" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>AIX Development Team (&#64;pbfinley1911)</p></li>
</ul>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="bootlist.html" class="btn btn-neutral float-right" title="bootlist – Alters the list of boot devices available to the system." accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="alt_disk.html" class="btn btn-neutral float-left" title="alt_disk – Alternate rootvg disk management." accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2020, IBM.

    </p>
  </div> 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>