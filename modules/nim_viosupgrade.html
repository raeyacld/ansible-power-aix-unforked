

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>nim_viosupgrade – Use NIM to upgrade VIOS(es) with the viosupgrade tool from a NIM master. &mdash; IBM Power Systems AIX 1.0.0-beta1 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="reboot – Reboot AIX machines." href="reboot.html" />
    <link rel="prev" title="nim_vios_hc – Check if a pair of VIOSes can be updated." href="nim_vios_hc.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> IBM Power Systems AIX
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quickstart.html">Quickstart</a></li>
</ul>
<p class="caption"><span class="caption-text">References</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../modules.html">Modules</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../modules.html#module-reference">Module reference</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="_nim_upgradeios.html">_nim_upgradeios – Use NIM to update a single or a pair of Virtual I/O Servers.</a></li>
<li class="toctree-l3"><a class="reference internal" href="aixpert.html">aixpert – System security settings management.</a></li>
<li class="toctree-l3"><a class="reference internal" href="alt_disk.html">alt_disk – Alternate rootvg disk management.</a></li>
<li class="toctree-l3"><a class="reference internal" href="backup.html">backup – Data or system volume group backup management.</a></li>
<li class="toctree-l3"><a class="reference internal" href="bootlist.html">bootlist – Alters the list of boot devices available to the system.</a></li>
<li class="toctree-l3"><a class="reference internal" href="devices.html">devices – Devices management.</a></li>
<li class="toctree-l3"><a class="reference internal" href="emgr.html">emgr – System interim fixes management.</a></li>
<li class="toctree-l3"><a class="reference internal" href="filesystem.html">filesystem – Local and NFS filesystems management.</a></li>
<li class="toctree-l3"><a class="reference internal" href="flrtvc.html">flrtvc – Generate FLRTVC report, download and install security and HIPER fixes.</a></li>
<li class="toctree-l3"><a class="reference internal" href="geninstall.html">geninstall – Generic installer for various packaging formats.</a></li>
<li class="toctree-l3"><a class="reference internal" href="group.html">group – Manage presence, attributes and member of AIX groups.</a></li>
<li class="toctree-l3"><a class="reference internal" href="inittab.html">inittab – Manage inittab entries on AIX.</a></li>
<li class="toctree-l3"><a class="reference internal" href="installp.html">installp – Installs and updates software.</a></li>
<li class="toctree-l3"><a class="reference internal" href="lpar_facts.html">lpar_facts – Reports logical partition (LPAR) related information as facts.</a></li>
<li class="toctree-l3"><a class="reference internal" href="lpp_facts.html">lpp_facts – Returns installed software products as facts.</a></li>
<li class="toctree-l3"><a class="reference internal" href="lvg.html">lvg – Configure AIX LVM volume groups</a></li>
<li class="toctree-l3"><a class="reference internal" href="lvm_facts.html">lvm_facts – Reports LVM information as facts.</a></li>
<li class="toctree-l3"><a class="reference internal" href="lvol.html">lvol – Configure AIX LVM logical volumes</a></li>
<li class="toctree-l3"><a class="reference internal" href="mkfilt.html">mkfilt – Activates or deactivates the filter rules.</a></li>
<li class="toctree-l3"><a class="reference internal" href="mktcpip.html">mktcpip – Sets the required values for starting TCP/IP on a host.</a></li>
<li class="toctree-l3"><a class="reference internal" href="mktun.html">mktun – Creates, activates, deactivates and removes tunnels.</a></li>
<li class="toctree-l3"><a class="reference internal" href="mount.html">mount – Mounts/unmounts a filesystem or device on AIX.</a></li>
<li class="toctree-l3"><a class="reference internal" href="mpio.html">mpio – Returns information about MultiPath I/O capable devices.</a></li>
<li class="toctree-l3"><a class="reference internal" href="nim.html">nim – Performs NIM operations - server setup, install packages, update SP or TL.</a></li>
<li class="toctree-l3"><a class="reference internal" href="nim_backup.html">nim_backup – Uses NIM to manage backup of LPAR or VIOS clients.</a></li>
<li class="toctree-l3"><a class="reference internal" href="nim_flrtvc.html">nim_flrtvc – Use NIM to generate FLRTVC report, download and install security and HIPER fixes.</a></li>
<li class="toctree-l3"><a class="reference internal" href="nim_suma.html">nim_suma – Use NIM to download fixes, SP or TL from IBM Fix Central website.</a></li>
<li class="toctree-l3"><a class="reference internal" href="nim_updateios.html">nim_updateios – Use NIM to update a single or a pair of Virtual I/O Servers.</a></li>
<li class="toctree-l3"><a class="reference internal" href="nim_vios_alt_disk.html">nim_vios_alt_disk – Uses NIM to create/cleanup an alternate rootvg disk of VIOS clients.</a></li>
<li class="toctree-l3"><a class="reference internal" href="nim_vios_hc.html">nim_vios_hc – Check if a pair of VIOSes can be updated.</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">nim_viosupgrade – Use NIM to upgrade VIOS(es) with the viosupgrade tool from a NIM master.</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#synopsis">Synopsis</a></li>
<li class="toctree-l4"><a class="reference internal" href="#requirements">Requirements</a></li>
<li class="toctree-l4"><a class="reference internal" href="#parameters">Parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="#notes">Notes</a></li>
<li class="toctree-l4"><a class="reference internal" href="#examples">Examples</a></li>
<li class="toctree-l4"><a class="reference internal" href="#return-values">Return Values</a></li>
<li class="toctree-l4"><a class="reference internal" href="#status">Status</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="reboot.html">reboot – Reboot AIX machines.</a></li>
<li class="toctree-l3"><a class="reference internal" href="suma.html">suma – Download/Install fixes, SP or TL from IBM Fix Central website.</a></li>
<li class="toctree-l3"><a class="reference internal" href="user.html">user – Create new users or change/remove attributes of users on AIX.</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../playbooks.html">Playbooks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../roles.html">Roles</a></li>
</ul>
<p class="caption"><span class="caption-text">Community Guides</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../community_guides.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../community_guides.html#helpful-links">Helpful Links</a></li>
</ul>
<p class="caption"><span class="caption-text">Requirements</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../requirements.html">Requirements</a></li>
</ul>
<p class="caption"><span class="caption-text">Appendices</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../release_notes.html">Releases</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">IBM Power Systems AIX</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../modules.html">Modules</a> &raquo;</li>
        
      <li>nim_viosupgrade – Use NIM to upgrade VIOS(es) with the viosupgrade tool from a NIM master.</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            
              <a href="https://github.com/IBM/ansible-power-aix/blob/dev-collection/docs/source/modules/nim_viosupgrade.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="nim-viosupgrade-use-nim-to-upgrade-vios-es-with-the-viosupgrade-tool-from-a-nim-master">
<span id="nim-viosupgrade-module"></span><h1>nim_viosupgrade – Use NIM to upgrade VIOS(es) with the viosupgrade tool from a NIM master.<a class="headerlink" href="#nim-viosupgrade-use-nim-to-upgrade-vios-es-with-the-viosupgrade-tool-from-a-nim-master" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#synopsis" id="id1">Synopsis</a></p></li>
<li><p><a class="reference internal" href="#requirements" id="id2">Requirements</a></p></li>
<li><p><a class="reference internal" href="#parameters" id="id3">Parameters</a></p></li>
<li><p><a class="reference internal" href="#notes" id="id4">Notes</a></p></li>
<li><p><a class="reference internal" href="#examples" id="id5">Examples</a></p></li>
<li><p><a class="reference internal" href="#return-values" id="id6">Return Values</a></p></li>
<li><p><a class="reference internal" href="#status" id="id7">Status</a></p></li>
</ul>
</div>
<div class="section" id="synopsis">
<h2><a class="toc-backref" href="#id1">Synopsis</a><a class="headerlink" href="#synopsis" title="Permalink to this headline">¶</a></h2>
<p>Uses the Network Installation Management (NIM) to performs the operations of backing up the virtual and logical configuration data, installing the specified image, and restoring the virtual and logical configuration data of the Virtual I/O Server (VIOS) from the NIM master.</p>
<p>The installation is a new and complete installation using the provided VIOS image, any customized configurations that might exist on the currently running system before the installation starts (including the timezone) are not included in the new installation image.</p>
</div>
<div class="section" id="requirements">
<h2><a class="toc-backref" href="#id2">Requirements</a><a class="headerlink" href="#requirements" title="Permalink to this headline">¶</a></h2>
<p>The below requirements are needed on the host that executes this module.</p>
<ul class="simple">
<li><p>AIX &gt;= 7.2 TL3</p></li>
<li><p>Python &gt;= 2.7</p></li>
<li><p>ios_mksysb VIOS level &gt;= 3.1.0.0</p></li>
<li><p>Privileged user with authorizations: <strong>aix.system.install,aix.system.nim.config.server</strong></p></li>
</ul>
</div>
<div class="section" id="parameters">
<h2><a class="toc-backref" href="#id3">Parameters</a><a class="headerlink" href="#parameters" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><dl>
<dt>action (True, str, None)</dt><dd><p>Specifies the operation to perform.</p>
<p><code class="docutils literal notranslate"><span class="pre">get_status</span></code> to get the status of an ongoing upgrade operation.</p>
<p><code class="docutils literal notranslate"><span class="pre">bosinst</span></code> to perform a new and fresh installation on the current rootvg disk.</p>
<p><code class="docutils literal notranslate"><span class="pre">altdisk</span></code> to perform a new installation on the alternative disk. The current rootvg disk on the VIOS partition is not impacted by this installation. The VIOS partition that has the current rootvg disk, remains in the running state during the installation of the alternative disk.</p>
</dd>
<dt>targets (optional, list, None)</dt><dd><p>Specifies the list of VIOSes NIM targets to update.</p>
<p>Either <em>targets</em> or <em>target_file</em> must be specified.</p>
<p>For an SSP cluster, the viosupgrade command must be run on individual nodes. Out of the <strong>n</strong> number of nodes in the SSP cluster, maximum <strong>n-1</strong> nodes can be upgraded at the same time. Hence, you must ensure that at least one node is always active in the cluster and is not part of the upgrade process.</p>
</dd>
<dt>target_file (optional, str, None)</dt><dd><p>Specifies the file name that contains the list of VIOS nodes.</p>
<p>Either <em>targets</em> or <em>target_file</em> must be specified.</p>
<p>The values and fields in the file must be specified in a particular sequence and format. The details of the format are specified in the <strong>/usr/samples/nim/viosupgrade.inst</strong> file and they are comma-separated. The maximum number of nodes that can be installed through the -f option is 30.</p>
<p>The VIOS images are installed on the nodes simultaneously.</p>
<p>For an SSP cluster, the viosupgrade command must be run on individual nodes. Out of the <strong>n</strong> number of nodes in the SSP cluster, maximum <strong>n-1</strong> nodes can be upgraded at the same time. Hence, you must ensure that at least one node is always active in the cluster and is not part of the upgrade process.</p>
<p>Only the <em>action</em> and <em>preview</em> parameters will be considered while others should be provided in file.</p>
</dd>
<dt>viosupgrade_params (False, dict, None)</dt><dd><p>Specifies the parameters for the viosupgrade command in a dictionary of disctionaries.</p>
<p>The keys of this dictionary can be the target name or the specific key <strong>‘all’</strong>. Then associated parameters will apply to the target or all of them. When <em>target_file</em> is specified, then you must use the key <strong>‘all’</strong>.</p>
<p>When building the viosugrade command, it will look first if the parameter is present for the target then into the <strong>‘all’</strong> section.</p>
<p>Valid keys are the follwoing.</p>
<p><em>ios_mksysb</em>, specifies the ios_mksysb resource name on the NIM Master server for the specified VIOS installation.</p>
<p><em>spotname</em>, when <code class="docutils literal notranslate"><span class="pre">action=bosinst</span></code> it specifies the resource object name of the Shared Product Object Tree (SPOT) for NIM installation.</p>
<p><em>rootvg_clone_disk</em>, mandatory if <code class="docutils literal notranslate"><span class="pre">action=altdisk</span></code> this colon-separated list specifies alternative disks to install the selected VIOS image, current rootvg disk on the VIOS partition is not impacted by this installation. When <code class="docutils literal notranslate"><span class="pre">action=bosinst</span></code>, the provided disks are used to clone the current rootvg. After the completion of the migration process, the current rootvg disk is installed with the provided image. The provided disks are at the VIOS level before the migration process.</p>
<p><em>skip_rootvg_cloning</em>, when <code class="docutils literal notranslate"><span class="pre">action=bosinst</span></code> boolean (default=no) to skip the cloning of current rootvg disks to alternative disks and continues with the VIOS installation on the current rootvg disk.</p>
<p><em>rootvg_install_disk</em>, when <code class="docutils literal notranslate"><span class="pre">action=bosinst</span></code> this colon-separated list specifies new rootvg disks where the specified image must be installed instead of the existing rootvg disks, one and only one of <em>rootvg_clone_disk</em> or <em>rootvg_install_disk</em> or <em>skip_rootvg_cloning</em> must be specified.</p>
<p><em>backup_file_resource</em>, specifies the resource name of the VIOS configuration backup file.</p>
<p><em>resources</em>, specifies the configuration resources to be applied after the installation, valid values are resolv_conf, script, fb_script, file_res, image_data, and log.</p>
<p><em>manage_cluster</em>, boolean (default=yes) that specifies that cluster-level backup and restore operations are performed, mandatory for the VIOS that is part of an SSP cluster.</p>
<p><em>preview</em>, boolean (default=false) that specifies only validation of VIOS hosts readyness for installation is performed, can be used for preview of the installation image only.</p>
</dd>
<dt>vios_status (optional, dict, None)</dt><dd><p>Specifies the result of a previous operation.</p>
<p>If set then the <em>vios_status</em> of a target tuple must contain <code class="docutils literal notranslate"><span class="pre">SUCCESS</span></code> to attempt update.</p>
<p>If no <em>vios_status</em> value is found for a tuple, then returned <em>status</em> for this tuple is set to <code class="docutils literal notranslate"><span class="pre">SKIPPED-NO-PREV-STATUS</span></code>.</p>
</dd>
<dt>nim_node (optional, dict, None)</dt><dd><p>Allows to pass along NIM node info from a task to another so that it discovers NIM info only one time for all tasks.</p>
</dd>
</dl>
</div></blockquote>
</div>
<div class="section" id="notes">
<h2><a class="toc-backref" href="#id4">Notes</a><a class="headerlink" href="#notes" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>See IBM documentation about requirements for the viosupgrade command at <a class="reference external" href="https://www.ibm.com/support/knowledgecenter/en/ssw_aix_72/v_commands/viosupgrade.html">https://www.ibm.com/support/knowledgecenter/en/ssw_aix_72/v_commands/viosupgrade.html</a>.</p></li>
<li><p>You can refer to the IBM documentation for additional information on the NIM concept at <a class="reference external" href="https://www.ibm.com/support/knowledgecenter/ssw_aix_72/install/nim_concepts.html">https://www.ibm.com/support/knowledgecenter/ssw_aix_72/install/nim_concepts.html</a>,</p></li>
<li><p>The viosupgrade command on NIM server is supported from IBM AIX 7.2 with Technology Level 3, or later.</p></li>
<li><p>For NIM bosinst method of installation, supported current VIOS levels are 2.2.6.30, or later.</p></li>
<li><p>If the altinst_rootvg or old_rootvg disks are already available in the VIOS, you must rename them.</p></li>
<li><p>The disks that are specified for the VIOS installation must not be in use.</p></li>
<li><p>In an SSP cluster, you must ensure that at least one node is always active in the cluster and is not part of the upgrade process.</p></li>
<li><p>If the viosupgrade command fails to restore all of the mappings, you must manually re-initiate the restore operation on the VIOS.</p></li>
<li><p>If you have installed any additional software on the VIOS apart from what is supplied as part of the base VIOS image, the viosupgrade command might fail to restore configurations that are related to that software. To manage this scenario, you must create a customized VIOS image with the software applications that you might want to include and provide this customized VIOS image as an input to the viosupgrade command for installation.</p></li>
</ul>
</div>
</div>
<div class="section" id="examples">
<h2><a class="toc-backref" href="#id5">Examples</a><a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h2>
<div class="highlight-yaml+jinja notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Validate an altdisk viosupgrade, no change on the vios</span>
  <span class="nt">nim_viosupgrade</span><span class="p">:</span>
    <span class="nt">action</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">altdisk</span>
    <span class="nt">targets</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">nimvios01</span>
    <span class="nt">viosupgrade_params</span><span class="p">:</span>
      <span class="nt">all</span><span class="p">:</span>
        <span class="nt">resources</span><span class="p">:</span>              <span class="l l-Scalar l-Scalar-Plain">master_net_conf:logdir</span>
        <span class="nt">manage_cluster</span><span class="p">:</span>         <span class="l l-Scalar l-Scalar-Plain">False</span>
        <span class="nt">preview</span><span class="p">:</span>                <span class="l l-Scalar l-Scalar-Plain">True</span>
      <span class="nt">nimvios01</span><span class="p">:</span>
        <span class="nt">ios_mksysb</span><span class="p">:</span>             <span class="l l-Scalar l-Scalar-Plain">vios-3-1-1-0_sysb</span>
        <span class="nt">rootvg_clone_disk</span><span class="p">:</span>      <span class="l l-Scalar l-Scalar-Plain">hdisk1</span>
        <span class="nt">backup_file_resource</span><span class="p">:</span>   <span class="l l-Scalar l-Scalar-Plain">nimvios01_iosb</span>

<span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Perform an altdisk viosupgrade</span>
  <span class="nt">nim_viosupgrade</span><span class="p">:</span>
    <span class="nt">action</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">altdisk</span>
    <span class="nt">targets</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">nimvios01</span>
    <span class="nt">viosupgrade_params</span><span class="p">:</span>
      <span class="nt">all</span><span class="p">:</span>
        <span class="nt">resources</span><span class="p">:</span>              <span class="l l-Scalar l-Scalar-Plain">master_net_conf:logdir</span>
        <span class="nt">manage_cluster</span><span class="p">:</span>         <span class="l l-Scalar l-Scalar-Plain">False</span>
        <span class="nt">preview</span><span class="p">:</span>                <span class="l l-Scalar l-Scalar-Plain">False</span>
      <span class="nt">nimvios01</span><span class="p">:</span>
        <span class="nt">ios_mksysb</span><span class="p">:</span>             <span class="l l-Scalar l-Scalar-Plain">vios-3-1-1-0_sysb</span>
        <span class="nt">rootvg_clone_disk</span><span class="p">:</span>      <span class="l l-Scalar l-Scalar-Plain">hdisk1</span>
        <span class="nt">backup_file_resource</span><span class="p">:</span>   <span class="l l-Scalar l-Scalar-Plain">nimvios01_iosb</span>

<span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Wait for up to an hour for the viosupgrade status to complete</span>
  <span class="nt">nim_viosupgrade</span><span class="p">:</span>
    <span class="nt">action</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">get_status</span>
    <span class="nt">targets</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">nimvios01</span>
  <span class="nt">register</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">result</span>
  <span class="nt">until</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">result.status[&#39;nimvios01&#39;] != &#39;ONGOING&#39;</span>
  <span class="nt">retries</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">30</span>
  <span class="nt">delay</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">120</span>

<span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Validate an bosinst viosupgrade, no change on the vios</span>
  <span class="nt">nim_viosupgrade</span><span class="p">:</span>
    <span class="nt">action</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">bosinst</span>
    <span class="nt">targets</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">nimvios02</span>
    <span class="nt">viosupgrade_params</span><span class="p">:</span>
      <span class="nt">all</span><span class="p">:</span>
        <span class="nt">resources</span><span class="p">:</span>              <span class="l l-Scalar l-Scalar-Plain">master_net_conf:logdir:my_filebackup_res</span>
        <span class="nt">manage_cluster</span><span class="p">:</span>         <span class="l l-Scalar l-Scalar-Plain">False</span>
        <span class="nt">preview</span><span class="p">:</span>                <span class="l l-Scalar l-Scalar-Plain">True</span>
      <span class="nt">nimvios02</span><span class="p">:</span>
        <span class="nt">ios_mksysb</span><span class="p">:</span>             <span class="l l-Scalar l-Scalar-Plain">vios-3-1-1-0_sysb</span>
        <span class="nt">spotname</span><span class="p">:</span>               <span class="l l-Scalar l-Scalar-Plain">vios-3-1-1-0_spot</span>
        <span class="nt">rootvg_install_disk</span><span class="p">:</span>    <span class="s">&quot;hdisk1:hdisk2&quot;</span>
        <span class="nt">skip_rootvg_cloning</span><span class="p">:</span>    <span class="l l-Scalar l-Scalar-Plain">False</span>
        <span class="nt">backup_file_resource</span><span class="p">:</span>   <span class="l l-Scalar l-Scalar-Plain">nimvios02_iosb</span>
</pre></div>
</div>
</div>
<div class="section" id="return-values">
<h2><a class="toc-backref" href="#id6">Return Values</a><a class="headerlink" href="#return-values" title="Permalink to this headline">¶</a></h2>
<dl>
<dt>msg (always, str, )</dt><dd><p>Status information.</p>
</dd>
<dt>targets (always, list, [‘vios1’, ‘vios2’, ‘…’])</dt><dd><p>List of NIM client actually targeted for the operation.</p>
</dd>
<dt>status (always, dict, { vios1: ‘SUCCESS’, vios2: ‘FAILURE’ })</dt><dd><p>Status of the operation for each VIOS <code class="docutils literal notranslate"><span class="pre">target</span></code>. It can be empty, SUCCESS or FAILURE.</p>
<p>When <code class="docutils literal notranslate"><span class="pre">target_file</span></code> is set, then the key is ‘all’.</p>
</dd>
<dt>cmd (If the command was run when C(target_file) is set., str, )</dt><dd><p>Command executed.</p>
</dd>
<dt>stdout (If the command was run when C(target_file) is set., str, )</dt><dd><p>Standard output of the command.</p>
</dd>
<dt>stderr (If the command was run when C(target_file) is set., str, )</dt><dd><p>Standard error of the command.</p>
</dd>
<dt>nim_node (always, dict, {‘nim_node’: {‘vios’: {‘vios1’: {‘Cstate’: ‘ready for a NIM operation’, ‘Cstate_result’: ‘success’, ‘Mstate’: ‘currently running’, ‘cable_type1’: ‘N/A’, ‘class’: ‘management’, ‘connect’: ‘nimsh’, ‘cpuid’: ‘00F600004C00’, ‘if1’: ‘master_net vios1.aus.stglabs.ibm.com 0’, ‘mgmt_profile1’: ‘p8-hmc 1 vios-cec’, ‘netboot_kernel’: ‘64’, ‘platform’: ‘chrp’, ‘prev_state’: ‘alt_disk_install operation is being performed’}}}})</dt><dd><p>NIM node info. It can contains more information if passed as option <em>nim_node</em>.</p>
<dl class="simple">
<dt>vios (always, dict, )</dt><dd><p>List of VIOS NIM resources.</p>
</dd>
</dl>
</dd>
<dt>meta (always, dict, )</dt><dd><p>Detailed information on the module execution.</p>
<dl>
<dt>messages (always, list, )</dt><dd><p>Details on errors/warnings not related to a specific target vios.</p>
</dd>
<dt>&lt;vios&gt; (when target is actually a NIM client, dict, )</dt><dd><p>Detailed information on the execution on the target vios. Can be ‘all’.</p>
<dl class="simple">
<dt>messages (always, list, )</dt><dd><p>Details on errors/warnings.</p>
</dd>
<dt>cmd (If the command was run., str, )</dt><dd><p>Command executed.</p>
</dd>
<dt>stdout (If the command was run., str, )</dt><dd><p>Standard output of the command.</p>
</dd>
<dt>stderr (If the command was run., str, )</dt><dd><p>Standard error of the command.</p>
</dd>
</dl>
</dd>
</dl>
</dd>
</dl>
</div>
<div class="section" id="status">
<h2><a class="toc-backref" href="#id7">Status</a><a class="headerlink" href="#status" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>This module is not guaranteed to have a backwards compatible interface. <em>[preview]</em></p></li>
<li><p>This module is maintained by community.</p></li>
</ul>
<div class="section" id="authors">
<h3>Authors<a class="headerlink" href="#authors" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>AIX Development Team (&#64;pbfinley1911)</p></li>
</ul>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="reboot.html" class="btn btn-neutral float-right" title="reboot – Reboot AIX machines." accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="nim_vios_hc.html" class="btn btn-neutral float-left" title="nim_vios_hc – Check if a pair of VIOSes can be updated." accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2020, IBM.

    </p>
  </div> 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>